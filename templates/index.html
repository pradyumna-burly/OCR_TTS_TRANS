<!-- Add this inside the body -->

<!-- Language Selection Section -->
<div class="d-flex flex-column align-items-center mb-4">
    <label for="languageSelect" class="text-secondary">Select Language for Translation:</label>
    <select id="languageSelect" class="form-select" aria-label="Language Selection">
        <option value="">None (English)</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="hi">Hindi</option>
        <!-- Add more languages as needed -->
    </select>
</div>

<!-- Modify the JavaScript -->

<script>
    // Add this section in your existing script

    const languageSelect = document.getElementById('languageSelect');
    let selectedLanguage = languageSelect.value;

    // Language selection change
    languageSelect.addEventListener('change', (e) => {
        selectedLanguage = e.target.value;
    });

    uploadButton.addEventListener('click', async () => {
        const formData = new FormData();
        formData.append('image', capturedImage);

        const response = await fetch('/process-image', {
            method: 'POST',
            body: formData
        });

        const result = await response.json();
        extractedTextElement.textContent = result.text.map(item => item.text).join('\n');
        confidenceList.innerHTML = result.text.map(item => `
            <li class="list-group-item">
                ${(item.confidence * 1).toFixed(2)}% accurate
            </li>`).join('');
        resultImage.src = 'data:image/jpeg;base64,' + result.image;
        resultContainer.style.display = 'block';

        // Handle Translation
        if (selectedLanguage) {
            const translatedTextResponse = await fetch('/translate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ text: extractedTextElement.textContent, target_lang: selectedLanguage })
            });
            const translatedData = await translatedTextResponse.json();
            extractedTextElement.textContent = translatedData.translated_text;

            // Handle TTS for Translated Text
            playAudioButton.style.display = 'inline-block';
            playAudioButton.onclick = () => {
                const audio = new Audio(result.audio);
                audio.play();
            };
        } else {
            // Handle TTS for Original Text
            playAudioButton.style.display = 'inline-block';
            playAudioButton.onclick = () => {
                const audio = new Audio(result.audio);
                audio.play();
            };
        }
    });
</script>
